{% extends 'base.html' %}

{% block content %}

<form action="{% url 'confirmar_reserva' %}" action="POST"> {% csrf_token %}
    <table class="table table-striped table-hover table-bordered mt-4">
        <thead class="thead-dark">
            <th colspan="2">
                <span style="float:right;">Fecha: {{ fecha_actual }}</span>
                Datos del Cliente y Detalles del Viaje
            </th>
        </thead>
        <tbody>
            <tr>
                <td colspan="2">
                    <label for="datosCliente"><strong>Cliente: </strong>DATOS DEL CLIENTE AQUI</label>
                    <span style="float:right;"><strong>Viaje: </strong>{{ ruta.origen }} - {{ ruta.destino }} </span>
                    <br>
                    <span style="float:right;"><strong>Tren: </strong>{{ ruta.tren.nombre }}</span>
                </td>
            </tr>

        </tbody>
    </table>
        <div class="text-center">
            <strong>Asientos disponibles: </strong>
            <br>
            <ul class="list-inline mt-2">
                <li class="list-inline-item p-2"><h5>Informacion: </h5></li>
                <li class="list-inline-item badge bg-success p-2">Disponible</li>
                <li class="list-inline-item badge bg-danger p-2">Reservado</li>
                <li class="list-inline-item badge bg-warning text-dark p-2">Seleccionado</li>
            </ul>

            <div class="container mt-2">
                <!-- <h2 class="text-center mb-4">Reserva de Asientos</h2> -->
                {% for asientos in asientos %}
                    {% if asientos.numero_asiento == "1A" %}
                    <div class="form-check form-check-inline">
                        <input type="checkbox" class="btn-check" id="btn-check-{{asientos.numero_asiento}}" autocomplete="off" {{ asientos.estado }} >
                        <label
                            id="label-{{ asientos.numero_asiento }}"
                            class="btn  {% if asientos.estado == "checked" %} 
                                            btn-danger active 
                                        {% else %}
                                            btn-success active
                                        {% endif %}" 
                                        for="btn-check-{{asientos.numero_asiento}}" 
                                        {% if asientos.estado == 'checked' %}
                                            data-bs-toggle="button"
                                            aria-pressed="true"
                                        {% else %}
                                            aria-pressed="false"
                                        {% endif %}
                        >
                            {{asientos.numero_asiento}}
                        </label>
                    </div>
                    {% endif %}
                    {% if asientos.numero_asiento == "1B" %}
                    <div class="form-check form-check-inline">
                        <input type="checkbox" class="btn-check" id="btn-check-{{asientos.numero_asiento}}" autocomplete="off" {{ asientos.estado }} >
                        <label
                            id="label-{{ asientos.numero_asiento }}"
                            class="btn  {% if asientos.estado == "checked" %} 
                                            btn-danger active 
                                        {% else %}
                                            btn-success active
                                        {% endif %}" 
                                        for="btn-check-{{asientos.numero_asiento}}" 
                                        {% if asientos.estado == 'checked' %}
                                            data-bs-toggle="button"
                                            aria-pressed="true"
                                        {% else %}
                                            aria-pressed="false"
                                        {% endif %}
                        >
                            {{asientos.numero_asiento}}
                        </label>
                    </div>
                    {% endif %}
                    {% if asientos.numero_asiento == "1C" %}
                    <div class="form-check form-check-inline">
                        <input type="checkbox" class="btn-check" id="btn-check-{{asientos.numero_asiento}}" autocomplete="off" {{ asientos.estado }} >
                        <label
                            id="label-{{ asientos.numero_asiento }}"
                            class="btn  {% if asientos.estado == "checked" %} 
                                            btn-danger active 
                                        {% else %}
                                            btn-success active
                                        {% endif %}" 
                                        for="btn-check-{{asientos.numero_asiento}}" 
                                        {% if asientos.estado == 'checked' %}
                                            data-bs-toggle="button"
                                            aria-pressed="true"
                                        {% else %}
                                            aria-pressed="false"
                                        {% endif %}
                        >
                            {{asientos.numero_asiento}}
                        </label>
                    </div>
                    {% endif %}
                    {% if asientos.numero_asiento == "1D" %}
                    <div class="form-check form-check-inline">
                        <input type="checkbox" class="btn-check" id="btn-check-{{asientos.numero_asiento}}" autocomplete="off" {{ asientos.estado }} >
                        <label
                            id="label-{{ asientos.numero_asiento }}"
                            class="btn  {% if asientos.estado == "checked" %} 
                                            btn-danger active 
                                        {% else %}
                                            btn-success active
                                        {% endif %}" 
                                        for="btn-check-{{asientos.numero_asiento}}" 
                                        {% if asientos.estado == 'checked' %}
                                            data-bs-toggle="button"
                                            aria-pressed="true"
                                        {% else %}
                                            aria-pressed="false"
                                        {% endif %}
                        >
                            {{asientos.numero_asiento}}
                        </label>
                    </div>
                    {% endif %}
                {% endfor %}
                <br>
                {% for asientos in asientos %}
                    {% if asientos.numero_asiento == "2A" %}
                    <div class="form-check form-check-inline">
                        <input type="checkbox" class="btn-check" id="btn-check-{{asientos.numero_asiento}}" autocomplete="off" {{ asientos.estado }} >
                        <label
                            id="label-{{ asientos.numero_asiento }}"
                            class="btn  {% if asientos.estado == "checked" %} 
                                            btn-danger active 
                                        {% else %}
                                            btn-success active
                                        {% endif %}" 
                                        for="btn-check-{{asientos.numero_asiento}}" 
                                        {% if asientos.estado == 'checked' %}
                                            data-bs-toggle="button"
                                            aria-pressed="true"
                                        {% else %}
                                            aria-pressed="false"
                                        {% endif %}
                        >
                            {{asientos.numero_asiento}}
                        </label>
                    </div>
                    {% endif %}
                    {% if asientos.numero_asiento == "2B" %}
                    <div class="form-check form-check-inline">
                        <input type="checkbox" class="btn-check" id="btn-check-{{asientos.numero_asiento}}" autocomplete="off" {{ asientos.estado }} >
                        <label
                            id="label-{{ asientos.numero_asiento }}"
                            class="btn  {% if asientos.estado == "checked" %} 
                                            btn-danger active 
                                        {% else %}
                                            btn-success active
                                        {% endif %}" 
                                        for="btn-check-{{asientos.numero_asiento}}" 
                                        {% if asientos.estado == 'checked' %}
                                            data-bs-toggle="button"
                                            aria-pressed="true"
                                        {% else %}
                                            aria-pressed="false"
                                        {% endif %}
                        >
                            {{asientos.numero_asiento}}
                        </label>
                    </div>
                    {% endif %}
                    {% if asientos.numero_asiento == "2C" %}
                    <div class="form-check form-check-inline">
                        <input type="checkbox" class="btn-check" id="btn-check-{{asientos.numero_asiento}}" autocomplete="off" {{ asientos.estado }} >
                        <label
                            id="label-{{ asientos.numero_asiento }}"
                            class="btn  {% if asientos.estado == "checked" %} 
                                            btn-danger active 
                                        {% else %}
                                            btn-success active
                                        {% endif %}" 
                                        for="btn-check-{{asientos.numero_asiento}}" 
                                        {% if asientos.estado == 'checked' %}
                                            data-bs-toggle="button"
                                            aria-pressed="true"
                                        {% else %}
                                            aria-pressed="false"
                                        {% endif %}
                        >
                            {{asientos.numero_asiento}}
                        </label>
                    </div>
                    {% endif %}
                    {% if asientos.numero_asiento == "2D" %}
                    <div class="form-check form-check-inline">
                        <input type="checkbox" class="btn-check" id="btn-check-{{asientos.numero_asiento}}" autocomplete="off" {{ asientos.estado }} >
                        <label
                            id="label-{{ asientos.numero_asiento }}"
                            class="btn  {% if asientos.estado == "checked" %} 
                                            btn-danger active 
                                        {% else %}
                                            btn-success active
                                        {% endif %}" 
                                        for="btn-check-{{asientos.numero_asiento}}" 
                                        {% if asientos.estado == 'checked' %}
                                            data-bs-toggle="button"
                                            aria-pressed="true"
                                        {% else %}
                                            aria-pressed="false"
                                        {% endif %}
                        >
                            {{asientos.numero_asiento}}
                        </label>
                    </div>
                    {% endif %}
                {% endfor %}
                <br>
                {% for asientos in asientos %}
                    {% if asientos.numero_asiento == "3A" %}
                    <div class="form-check form-check-inline">
                        <input type="checkbox" class="btn-check" id="btn-check-{{asientos.numero_asiento}}" autocomplete="off" {{ asientos.estado }} >
                        <label
                            id="label-{{ asientos.numero_asiento }}"
                            class="btn  {% if asientos.estado == "checked" %} 
                                            btn-danger active 
                                        {% else %}
                                            btn-success active
                                        {% endif %}" 
                                        for="btn-check-{{asientos.numero_asiento}}" 
                                        {% if asientos.estado == 'checked' %}
                                            data-bs-toggle="button"
                                            aria-pressed="true"
                                        {% else %}
                                            aria-pressed="false"
                                        {% endif %}
                        >
                            {{asientos.numero_asiento}}
                        </label>
                    </div>
                    {% endif %}
                    {% if asientos.numero_asiento == "3B" %}
                    <div class="form-check form-check-inline">
                        <input type="checkbox" class="btn-check" id="btn-check-{{asientos.numero_asiento}}" autocomplete="off" {{ asientos.estado }} >
                        <label
                            id="label-{{ asientos.numero_asiento }}"
                            class="btn  {% if asientos.estado == "checked" %} 
                                            btn-danger active 
                                        {% else %}
                                            btn-success active
                                        {% endif %}" 
                                        for="btn-check-{{asientos.numero_asiento}}" 
                                        {% if asientos.estado == 'checked' %}
                                            data-bs-toggle="button"
                                            aria-pressed="true"
                                        {% else %}
                                            aria-pressed="false"
                                        {% endif %}
                        >
                            {{asientos.numero_asiento}}
                        </label>
                    </div>
                    {% endif %}
                    {% if asientos.numero_asiento == "3C" %}
                    <div class="form-check form-check-inline">
                        <input type="checkbox" class="btn-check" id="btn-check-{{asientos.numero_asiento}}" autocomplete="off" {{ asientos.estado }} >
                        <label
                            id="label-{{ asientos.numero_asiento }}"
                            class="btn  {% if asientos.estado == "checked" %} 
                                            btn-danger active 
                                        {% else %}
                                            btn-success active
                                        {% endif %}" 
                                        for="btn-check-{{asientos.numero_asiento}}" 
                                        {% if asientos.estado == 'checked' %}
                                            data-bs-toggle="button"
                                            aria-pressed="true"
                                        {% else %}
                                            aria-pressed="false"
                                        {% endif %}
                        >
                            {{asientos.numero_asiento}}
                        </label>
                    </div>
                    {% endif %}
                    {% if asientos.numero_asiento == "3D" %}
                    <div class="form-check form-check-inline">
                        <input type="checkbox" class="btn-check" id="btn-check-{{asientos.numero_asiento}}" autocomplete="off" {{ asientos.estado }} >
                        <label
                            id="label-{{ asientos.numero_asiento }}"
                            class="btn  {% if asientos.estado == "checked" %} 
                                            btn-danger active 
                                        {% else %}
                                            btn-success active
                                        {% endif %}" 
                                        for="btn-check-{{asientos.numero_asiento}}" 
                                        {% if asientos.estado == 'checked' %}
                                            data-bs-toggle="button"
                                            aria-pressed="true"
                                        {% else %}
                                            aria-pressed="false"
                                        {% endif %}
                        >
                            {{asientos.numero_asiento}}
                        </label>
                    </div>
                    {% endif %}
                {% endfor %}
                <br>
                {% for asientos in asientos %}
                    {% if asientos.numero_asiento == "4A" %}
                    <div class="form-check form-check-inline">
                        <input type="checkbox" class="btn-check" id="btn-check-{{asientos.numero_asiento}}" autocomplete="off" {{ asientos.estado }} >
                        <label
                            id="label-{{ asientos.numero_asiento }}"
                            class="btn  {% if asientos.estado == "checked" %} 
                                            btn-danger active 
                                        {% else %}
                                            btn-success active
                                        {% endif %}" 
                                        for="btn-check-{{asientos.numero_asiento}}" 
                                        {% if asientos.estado == 'checked' %}
                                            data-bs-toggle="button"
                                            aria-pressed="true"
                                        {% else %}
                                            aria-pressed="false"
                                        {% endif %}
                        >
                            {{asientos.numero_asiento}}
                        </label>
                    </div>
                    {% endif %}
                    {% if asientos.numero_asiento == "4B" %}
                    <div class="form-check form-check-inline">
                        <input type="checkbox" class="btn-check" id="btn-check-{{asientos.numero_asiento}}" autocomplete="off" {{ asientos.estado }} >
                        <label
                            id="label-{{ asientos.numero_asiento }}"
                            class="btn  {% if asientos.estado == "checked" %} 
                                            btn-danger active 
                                        {% else %}
                                            btn-success active
                                        {% endif %}" 
                                        for="btn-check-{{asientos.numero_asiento}}" 
                                        {% if asientos.estado == 'checked' %}
                                            data-bs-toggle="button"
                                            aria-pressed="true"
                                        {% else %}
                                            aria-pressed="false"
                                        {% endif %}
                        >
                            {{asientos.numero_asiento}}
                        </label>
                    </div>
                    {% endif %}
                    {% if asientos.numero_asiento == "4C" %}
                    <div class="form-check form-check-inline">
                        <input type="checkbox" class="btn-check" id="btn-check-{{asientos.numero_asiento}}" autocomplete="off" {{ asientos.estado }} >
                        <label
                            id="label-{{ asientos.numero_asiento }}"
                            class="btn  {% if asientos.estado == "checked" %} 
                                            btn-danger active 
                                        {% else %}
                                            btn-success active
                                        {% endif %}" 
                                        for="btn-check-{{asientos.numero_asiento}}" 
                                        {% if asientos.estado == 'checked' %}
                                            data-bs-toggle="button"
                                            aria-pressed="true"
                                        {% else %}
                                            aria-pressed="false"
                                        {% endif %}
                        >
                            {{asientos.numero_asiento}}
                        </label>
                    </div>
                    {% endif %}
                    {% if asientos.numero_asiento == "4D" %}
                    <div class="form-check form-check-inline">
                        <input type="checkbox" class="btn-check" id="btn-check-{{asientos.numero_asiento}}" autocomplete="off" {{ asientos.estado }} >
                        <label
                            id="label-{{ asientos.numero_asiento }}"
                            class="btn  {% if asientos.estado == "checked" %} 
                                            btn-danger active 
                                        {% else %}
                                            btn-success active
                                        {% endif %}" 
                                        for="btn-check-{{asientos.numero_asiento}}" 
                                        {% if asientos.estado == 'checked' %}
                                            data-bs-toggle="button"
                                            aria-pressed="true"
                                        {% else %}
                                            aria-pressed="false"
                                        {% endif %}
                        >
                            {{asientos.numero_asiento}}
                        </label>
                    </div>
                    {% endif %}
                {% endfor %}
                <br>
                {% for asientos in asientos %}
                    {% if asientos.numero_asiento == "5A" %}
                    <div class="form-check form-check-inline">
                        <input type="checkbox" class="btn-check" id="btn-check-{{asientos.numero_asiento}}" autocomplete="off" {{ asientos.estado }} >
                        <label
                            id="label-{{ asientos.numero_asiento }}"
                            class="btn  {% if asientos.estado == "checked" %} 
                                            btn-danger active 
                                        {% else %}
                                            btn-success active
                                        {% endif %}" 
                                        for="btn-check-{{asientos.numero_asiento}}" 
                                        {% if asientos.estado == 'checked' %}
                                            data-bs-toggle="button"
                                            aria-pressed="true"
                                        {% else %}
                                            aria-pressed="false"
                                        {% endif %}
                        >
                            {{asientos.numero_asiento}}
                        </label>
                    </div>
                    {% endif %}
                    {% if asientos.numero_asiento == "5B" %}
                    <div class="form-check form-check-inline">
                        <input type="checkbox" class="btn-check" id="btn-check-{{asientos.numero_asiento}}" autocomplete="off" {{ asientos.estado }} >
                        <label
                            id="label-{{ asientos.numero_asiento }}"
                            class="btn  {% if asientos.estado == "checked" %} 
                                            btn-danger active 
                                        {% else %}
                                            btn-success active
                                        {% endif %}" 
                                        for="btn-check-{{asientos.numero_asiento}}" 
                                        {% if asientos.estado == 'checked' %}
                                            data-bs-toggle="button"
                                            aria-pressed="true"
                                        {% else %}
                                            aria-pressed="false"
                                        {% endif %}
                        >
                            {{asientos.numero_asiento}}
                        </label>
                    </div>
                    {% endif %}
                    {% if asientos.numero_asiento == "5C" %}
                    <div class="form-check form-check-inline">
                        <input type="checkbox" class="btn-check" id="btn-check-{{asientos.numero_asiento}}" autocomplete="off" {{ asientos.estado }} >
                        <label
                            id="label-{{ asientos.numero_asiento }}"
                            class="btn  {% if asientos.estado == "checked" %} 
                                            btn-danger active 
                                        {% else %}
                                            btn-success active
                                        {% endif %}" 
                                        for="btn-check-{{asientos.numero_asiento}}" 
                                        {% if asientos.estado == 'checked' %}
                                            data-bs-toggle="button"
                                            aria-pressed="true"
                                        {% else %}
                                            aria-pressed="false"
                                        {% endif %}
                        >
                            {{asientos.numero_asiento}}
                        </label>
                    </div>
                    {% endif %}
                    {% if asientos.numero_asiento == "5D" %}
                    <div class="form-check form-check-inline">
                        <input type="checkbox" class="btn-check" id="btn-check-{{asientos.numero_asiento}}" autocomplete="off" {{ asientos.estado }} >
                        <label
                            id="label-{{ asientos.numero_asiento }}"
                            class="btn  {% if asientos.estado == "checked" %} 
                                            btn-danger active 
                                        {% else %}
                                            btn-success active
                                        {% endif %}" 
                                        for="btn-check-{{asientos.numero_asiento}}" 
                                        {% if asientos.estado == 'checked' %}
                                            data-bs-toggle="button"
                                            aria-pressed="true"
                                        {% else %}
                                            aria-pressed="false"
                                        {% endif %}
                        >
                            {{asientos.numero_asiento}}
                        </label>
                    </div>
                    {% endif %}
                {% endfor %}
                
                <div class="d-flex justify-content-end mt-3" style="width: auto;">
                    <div class="form-group mr-2" style="min-width: 150px;">
                        <button type="submit" id="reserveSeatsBtn" class="btn btn-dark w-100"
                            style="background-color: #000000; border-color: #000000; min-width: 150px;"
                            onmouseover="this.style.transform='scale(1.01)'; this.style.backgroundColor='#2c2c2c';"
                            onmouseout="this.style.transform='scale(1)'; this.style.backgroundColor='#000000';">
                            <i class="fas fa-save"></i> Reservar asientos
                        </button>
                    </div>
                    <div class="form-group" id="cancelSeatsBtn" style="min-width: 150px;">
                        <a href="javascript:history.back()" class="btn btn-dark w-100"
                            style="background-color: #000000; border-color: #000000; min-width: 150px;"
                            onmouseover="this.style.transform='scale(1.01)'; this.style.backgroundColor='#2c2c2c';"
                            onmouseout="this.style.transform='scale(1)'; this.style.backgroundColor='#000000';">
                            <i class="fas fa-save"></i> Cancelar
                        </a>
                    </div>
                </div>
            </div>
        </div>
</form>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Obtiene todos los checkboxes con clase btn-check
        document.querySelectorAll('.btn-check').forEach(function(checkbox) {
            checkbox.addEventListener('change', function() {
                console.log("Checkbox clicked: ", this.checked);
                var id = this.id; // Obtén el ID del checkbox
                var label = document.getElementById('label-' + id.split('-').pop()); // Obtén el label correspondiente
    
                if (this.checked) {
                    label.classList.remove('btn-success');
                    label.classList.add('btn-warning');
                } else {
                    label.classList.remove('btn-warning');
                    label.classList.add('btn-success');
                }
            });
        });
    });
</script>

{% endblock %}
